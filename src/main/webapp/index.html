<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>TiddlyBox</title>
  <style type="text/css">
.about {
  font-size: small;
  bottom: 10px;
  position: absolute;
}
  </style>
  <script type="text/javascript">
function getPath() {
  var path = document.getElementById('path').value.replace(/\\/g, '/');
  if (path[0] == '/') {
    return path.substring(1);
  }
  return path;
}

function updateLink() {
  var baseUrl = '/wiki/';
  var linkElement = document.getElementById('link');
  var path = getPath();
  path = baseUrl.concat(path);
  linkElement.href = path;
  linkElement.innerHTML = path;
}

function createCookie(name,value,days) {
	if (days) {
		var date = new Date();
		date.setTime(date.getTime()+(days*24*60*60*1000));
		var expires = "; expires="+date.toGMTString();
	}
	else var expires = "";
	document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
	var nameEQ = name + "=";
	var ca = document.cookie.split(';');
	for(var i=0;i < ca.length;i++) {
		var c = ca[i];
		while (c.charAt(0)==' ') c = c.substring(1,c.length);
		if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
	}
	return null;
}

function eraseCookie(name) {
	createCookie(name,"",-1);
}
  </script>
</head>
<body>
  <div id="intro">
    <h1>Welcome to TiddlyBox</h1>
    <p><a href="http://www.tiddlywiki.com">TiddlyWiki</a> is a file-based wiki that's designed to be opened locally and
    saved back to the same file after editing. The whole wiki is stored in a single HTML file</p>
    <p><a href="http://www.dropbox.com">Dropbox</a> is a file synchronization program that will always make sure you have
    the newest version of a file on all computers with the Dropbox client installed.</p>
    <p>Using these two things together is very handy, but for those times when you want to view or edit your TiddlyWiki from
    a computer without a Dropbox client, I built TiddlyWiki.</p>
  </div>
  <div id="use">
    <p>If you already have a wiki, please put in the path to your Wiki here. The path is relative to your Dropbox folder
    (for &lt;home&gt;/Dropbox/Wiki/TiddlyWiki.html put in /Wiki/TiddlyWiki.html). After authorizing TiddlyBox on Dropbox.com,
    your wiki will open up. Editing the wiki will save the changes back to your account, so they'll be synced to your computer.</p>
    Dropbox path <input id="path" type="text" value="/Wiki/TiddlyWiki.html" onchange="updateLink();"/>
    is viewable at <a id="link" href="/broken">/broken</a>
  </div>
  <div>
    Cookie value: <span id="cookie"></span><button onclick="eraseCookie('tiddlyboxkey');">Clear</button>
  </div>
  <div class="about">
    This open-source project is hosted at <a href="https://github.com/stevearm/tiddlybox">GitHub</a>.
  </div>
  <script type="text/javascript">
updateLink();
document.getElementById('cookie').innerHTML = readCookie('tiddlyboxkey');
  </script>
</body>
</html>
